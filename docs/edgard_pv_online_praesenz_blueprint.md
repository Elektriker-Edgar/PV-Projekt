# Zielbild

Eine seriöse, technisch fokussierte Online‑Präsenz für **EDGARD --
Elektro** (Einzugsgebiet Hamburg ±60 km) zur Beratung, Vorbereitung,
Installation, Anmeldung und Inbetriebnahme steckerfertiger PV‑Anlagen
ohne Dachmontage. Verkauf kompletter Kits sowie Verarbeitung
kundenseitig bereitgestellter Komponenten. KI‑gestützte,
halbautomatische Angebotserstellung mit manueller Freigabe.

------------------------------------------------------------------------

## Value Proposition in einem Satz

**„Wir liefern steckerfertige PV‑Systeme inklusive Anmeldung und
Zählerplatz‑Ertüchtigung -- Sie stecken die Module nur noch an."**

------------------------------------------------------------------------

## Leistungsumfang

-   Beratung zu Systemauslegung und Netzanschluss
-   Lieferung kompatibler Komponenten (WR, Speicher,
    Überspannungsschutz, Potentialausgleich, Zählerplatzertüchtigung)
-   Elektrischer Anschluss, Inbetriebnahme, Anmeldung MaStR und
    Netzbetreiber
-   Optional: Integration bestehender Kundengeräte
-   Nicht enthalten: mechanische Montage auf dem Dach,
    Fördermittelberatung

## Servicegrenzen und Region

-   Einsatzgebiet: Hamburg und Umkreis ca. 60 km
-   Keine Dacharbeiten, keine statischen Berechnungen

------------------------------------------------------------------------

## Branding‑Leitlinien

-   Markenname: **EDGARD -- Elektro** (Hinweis auf PV‑Service im Claim)
-   Domain: **edgard‑gruppe.de** (Unterseite/Slug für PV, z. B.
    */pv‑service*)
-   Stil: technisch‑seriös, klar, ohne Marketing‑Floskeln
-   Farbleitbild: kühles Blau/Grau, Akzent in frischem Grün
-   Logo: an bestehendes Baustrom‑Logo angelehnt (Wort‑Bild‑Marke,
    geometrische Formen, klare Linien)

------------------------------------------------------------------------

## Seitenstruktur (IA)

1.  **Startseite** -- Leistungsversprechen, 3‑Schritte‑Ablauf,
    Kontakt/CTA
2.  **Leistungen** -- Details zu Elektro‑Vorbereitung, Zählerplatz,
    Schutzkonzept, Anmeldung
3.  **Ablauf** -- Digitale Vorprüfung, Daten‑Upload, Angebot,
    Vor‑Ort‑Termin
4.  **Pakete & Preise** -- Modularkomponenten und Richtpreise, klare
    Abgrenzungen
5.  **Kompatible Systeme** -- White‑List getester WR/Speicher und
    Schnittstellen
6.  **FAQ** -- häufige Fragen zu Anmeldung, MaStR, Netzbetreiber,
    Steckfertigkeit
7.  **Referenzen** -- Beispielprojekte (ohne Dachbilder), Mess‑ und
    Schaltpläne (anonymisiert)
8.  **Kontakt** -- Anfrageassistent (KI/Workflow), Terminwunsch
9.  **Rechtliches** -- Impressum, Datenschutz, AGB, Widerruf

------------------------------------------------------------------------

## Textbausteine (SEO‑optimiert, deutsch)

### Start: Hero

**Steckerfertige PV‑Anlagen für Ihr Zuhause oder Gewerbe**\
Wir planen, liefern und bereiten Ihre Anlage fachgerecht vor --
inklusive Anmeldung beim Netzbetreiber und im Marktstammdatenregister.
Sie verbinden nur noch die Module.

CTA: *Jetzt Vorprüfung starten*

### Start: Drei Schritte

1.  **Digitale Vorprüfung**: Daten hochladen, Fotos vom Zählerschrank
    und Hausanschluss beifügen.\
2.  **Angebot & Vorbereitung**: Wir erstellen ein Angebot und rüsten
    Zählerplatz, Schutzgeräte und Leitungen vor.\
3.  **Inbetriebnahme & Anmeldung**: Wir schließen an, messen, prüfen und
    melden an.

### Leistungen (Auszug)

-   **Zählerplatz‑Ertüchtigung** nach aktueller TAB, Selektivität,
    Platzreserven
-   **Überspannungsschutz** AC‑seitig, Koordination mit vorhandenen SPD
-   **Potentialausgleich** und Leitungsführung nach VDE‑Normen
-   **Wechselrichter & Speicher** inklusive Parametrierung und
    Netzkonfiguration
-   **MaStR‑Eintrag und Netzbetreiber‑Meldung**
-   **Bestandsintegration**: Wir prüfen und integrieren kundeneigene
    Komponenten, sofern kompatibel

### Abgrenzung

-   Keine Dach‑ oder Statikarbeiten\
-   Keine Fördermittelberatung\
-   Mechanische Montage der Module erfolgt durch den Kunden oder einen
    Dachdecker seiner Wahl

### Pakete (Richtpreise, final nach Vorprüfung)

-   **Basis**: WR bis 3 kVA, AC‑Anschluss, MaStR/Netzmeldung\
-   **Plus**: wie Basis + Zählerplatz‑Ertüchtigung + SPD\
-   **Pro**: wie Plus + Speicherintegration + Energiemanagement

### FAQ (Beispiele)

-   *Was bedeutet „steckerfertig"?*\
    Der elektrische Teil wird vollständig vorbereitet und geprüft. Nach
    Lieferung und Anschluss können die PV‑Module mit den vorbereiteten
    Steckverbindern verbunden werden.
-   *Kann ich eigene Komponenten nutzen?*\
    Ja, wir prüfen Kompatibilität und übernehmen Haftung für den
    Elektro‑Anschluss im geprüften Umfang.
-   *Wer meldet die Anlage an?*\
    Wir übernehmen MaStR und Netzbetreiber‑Meldung.

------------------------------------------------------------------------

## KI‑gestützte Auftragsannahme (Konzept)

**Ziel**: Datensparsame, strukturierte Vorprüfung → automatisierte
Angebotskalkulation → manuelle Freigabe → Kunde erhält Angebot als PDF
und Link zur Terminabstimmung.

### Formularfelder Vorprüfung

-   **Kundendaten**: Name, Adresse, E‑Mail, Telefon
-   **Objekt**: EFH, MFH, Gewerbe; Baujahr; Hauptsicherungen (A);
    Netzform; Entfernung Zählerschrank--HAK
-   **Zählerplatz**: Foto innen/außen, verfügbarer Platz, aktueller
    Zählerstatus
-   **Geplante Leistung**: WR‑Leistung, gewünschter Speicher, vorhandene
    Module ja/nein
-   **Komponentenwahl**: „über EDGARD beziehen" oder „eigene Komponenten
    hochladen" (Datenblatt‑Upload)
-   **Terminwunsch**: Zeitfenster Wochentage + Tageszeiten

### Logik Angebot (Regelwerk, vereinfachte Darstellung)

-   Basispreis Arbeit + Anfahrt (Zonen Hamburg 0--60 km)
-   Materialpakete je nach Konfiguration: WR‑Klasse, SPD, PA,
    Zählerplatz, Speicher
-   Zuschläge: Netzform TN/TT, selektive Vorsicherung, Leitungswege
    \> X m
-   Rabatte: Komplett‑Kit von EDGARD

### Ausgabe

-   **Vorläufige Kalkulation** → interne Prüfung → **Freigabe** →
    PDF‑Angebot mit Leistungstexten, Materialliste, Prüf‑ und
    Anmeldeumfang, Ausschlüssen
-   **Terminvorschläge** auf Basis deiner Kalenderverfügbarkeit

------------------------------------------------------------------------

## n8n‑Integration (Vorschlag)

-   **Webhook**: Aufnahme der Formular‑Payload (JSON)
-   **Validierung**: Pflichtfelder, Dateitypen (Fotos, PDFs),
    Plausibilitätschecks
-   **Kalkulation**: Funktionsknoten mit Preisregeln, Rückgabe
    Netto/Brutto und Positionen
-   **Dokumente**: Generierung Angebot (HTML→PDF), Speicherung in
    S3/MinIO
-   **Benachrichtigung**: E‑Mail an dich mit Zusammenfassung und
    Freigabe‑Link
-   **Status**: Schreiben in CRM/DB; Kunde bekommt „eingegangen" → „in
    Prüfung" → „Angebot freigegeben"

------------------------------------------------------------------------

## Technische Architektur (Django‑basiert)

**Stack**: Django, Django REST Framework, PostgreSQL, Redis, Celery,
HTMX oder React für Form‑Wizard, WeasyPrint/ReportLab für PDF, S3/MinIO
für Uploads, Traefik/Nginx, Docker.

### Django Apps

-   **core**: Einstellungen, User, Rollen, Auditing
-   **customers**: Kundendaten, Adressen, DSGVO‑Einwilligungen
-   **inventory**: Komponenten‑Katalog, Kompatibilität, Preislisten
-   **quotes**: Vorprüfung, Kalkulationsregeln, Angebote, PDF‑Generator
-   **orders**: Aufträge, Status, Checklisten, Abnahmen,
    Mess‑/Prüfprotokolle
-   **grid**: Netzbetreiber, MaStR‑Daten, Zählerplatz‑Schemen
-   **scheduler**: Terminfenster, Abstimmung, ICS‑Export
-   **integrations**: n8n‑Webhooks, Mail, S3, Payment optional

### Zentrale Modelle (Auszug)

``` text
Customer(id, name, email, phone, address, consent_ts)
Site(id, customer, address, grid_type, main_fuse_a, photos[])
Component(id, name, type, vendor, sku, datasheet_url, compatible_with[])
Precheck(id, site, desired_kw, storage_kwh, own_components[], notes)
Quote(id, precheck, subtotal, vat, total, status[draft|approved|sent], pdf_url)
QuoteItem(id, quote, component, qty, unit_price, text)
Order(id, quote, status, scheduled_at, documents[])
```

### REST Endpoints (Auszug)

-   `POST /api/precheck/` -- Vorprüfung anlegen, Uploads
-   `POST /api/quote/{id}/approve/` -- interne Freigabe
-   `GET /api/quote/{id}/pdf/` -- PDF‑Abruf für Kunde
-   `POST /api/integrations/n8n/webhook/` -- Übergabe an n8n

### Admin / Backoffice

-   Übersichten: Prechecks, Angebote, Aufträge, Kalender
-   Review‑Ansicht mit Fotos, Parametern, Regel‑Triggern
-   Ein‑Klick „Angebot freigeben" mit E‑Mail an Kunden

### PDF‑Generator

-   Vorlagen in HTML/CSS (WeasyPrint)
-   Kopf: EDGARD -- Elektro, Angebotsdaten, Kunde, Projekt
-   Body: Leistungsbeschreibung, Komponentenliste, Preisblöcke
-   Fuß: Geltungsbereich, Ausschlüsse, Ausführungsfristen,
    Zahlungsbedingungen

------------------------------------------------------------------------

## Recht und Compliance (Hinweise)

-   **Impressum** nach § 5 TMG
-   **Datenschutz** DSGVO, Auftragsverarbeitung für S3/n8n, Löschkonzept
-   **AGB** mit klaren Leistungsgrenzen, Haftungsumfang bei
    Kundengeräten
-   **Widerruf** für Verbraucher, sofern Fernabsatzvertrag
-   **Cookie‑Banner** nur falls Tracking/externes Hosting erforderlich
-   **Dokumentation**: Prüf‑ und Messprotokolle, Inbetriebnahme,
    MaStR‑Bestätigung

------------------------------------------------------------------------

## Beispiel‑Leistungstexte für Angebote

**Zählerplatz‑Ertüchtigung**\
Erneuerung/Ergänzung gemäß TAB, Anpassung Verdrahtung, Kennzeichnung,
Dokumentation.

**Überspannungsschutz AC**\
Einbau und Koordination mit bestehendem SPD, Prüfung Schleifenimpedanz,
Messprotokoll.

**Wechselrichter Inbetriebnahme**\
Parametrierung, Netzkonfiguration, Funktionstest, Protokoll und
Übergabe.

**MaStR/Netzbetreiber‑Meldung**\
Erfassung Stammdaten, Einreichung Unterlagen, Rückmeldung bis
Netzfreigabe.

**Integration Kundengeräte**\
Kompatibilitätsprüfung anhand Datenblatt; Anschluss im definierten
Umfang, Haftung auf Anschlussarbeiten beschränkt.

------------------------------------------------------------------------

## MVP‑Meilensteine

1.  **Woche 1--2**: Grundgerüst Django, Modelle, Admin, Form‑Wizard
    Vorprüfung, S3‑Uploads
2.  **Woche 3**: Kalkulationsregeln, PDF‑Angebot,
    E‑Mail‑Benachrichtigungen
3.  **Woche 4**: n8n‑Flows, Terminabstimmung, Live‑Gang Soft‑Launch

------------------------------------------------------------------------

## Beispiel‑Roadmap Features

-   v1.0 Vorprüfung + Angebot + Freigabe + PDF + Termin
-   v1.1 Kundenportal mit Statusanzeige
-   v1.2 Komponenten‑Shop (optional)
-   v1.3 Energiemanagement‑APIs (SMA, Hoymiles, etc.)

------------------------------------------------------------------------

## Beispiel‑Struktur Django Projekt

``` text
edgard_site/
  manage.py
  edgard_site/settings.py
  edgard_site/urls.py
  apps/
    core/
    customers/
    inventory/
    quotes/
    orders/
    grid/
    scheduler/
    integrations/
  templates/
  static/
```

### urls.py (Ausschnitt)

``` python
from django.urls import path, include
urlpatterns = [
  path('admin/', admin.site.urls),
  path('api/', include('apps.quotes.api_urls')),
  path('', include('apps.quotes.web_urls')),
]
```

### Precheck‑Form als Wizard (HTMX‑fähig, konzeptionell)

``` python
class PrecheckWizard(FormView):
    # steps: kundendaten -> objekt -> zaehlerplatz -> komponenten -> upload -> zusammenfassung
    pass
```

------------------------------------------------------------------------

## Beispiel‑E‑Mails

-   **Eingangsbestätigung**: „Ihre Daten sind eingegangen. Wir prüfen
    und melden uns."
-   **Angebot freigegeben**: Link zum PDF, Hinweis zu Gültigkeit und
    Terminabstimmung
-   **Terminbestätigung**: Datum, Zeitfenster, Checkliste für den Kunden

------------------------------------------------------------------------

## Terminabstimmung

-   Interne Verwaltung der freien Zeitfenster
-   Kunde wählt Wunschfenster → Anfrage → Bestätigung manuell
-   ICS‑Kalendereintrag per E‑Mail

------------------------------------------------------------------------

## Sicherheit

-   Upload‑Virus‑Scan (clamd), Größen‑ und Typ‑Whitelists
-   Rollen: Admin, Büro, Monteur
-   Protokollierung aller Freigaben

------------------------------------------------------------------------

## Nächste Schritte

1.  Freigabe von Branding‑Leitlinien und Domain‑Pfad
2.  Anlegen Git‑Repository + Django‑Skeleton
3.  Implementierung Precheck + Upload + Admin‑Review
4.  Regelwerk Kalkulation und Angebotstexte hinterlegen
5.  n8n‑Flow für Freigabe und PDF‑Versand einrichten
